(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{29:function(e,t,a){e.exports=a(53)},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},48:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(26),c=a.n(r),l=(a(34),a(27)),i=a(11),s=(a(35),a(36),a(37),a(18)),u=a(2);var d=function(){return o.a.createElement("div",{className:"title text-5xl"},o.a.createElement("h1",null,"Todo app"))};var m=function(e){var t=e.todo,a=e.completeTodo,n=e.removeTodo;return o.a.createElement("div",{className:"todo border-2",style:{textDecoration:t.data.done?"line-through":""}},o.a.createElement("label",{className:".text-xl .break-words"},t.data.todo),o.a.createElement("div",{className:"md:flex-shrink-0"},o.a.createElement("button",{className:"bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow",onClick:function(){return a(t)}}," ",t.data.done?"Uncomplete":"Complete"),o.a.createElement("button",{className:"bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow",onClick:function(){return n(t.id)}},"x")))};var p=function(e){var t=e.addTodo,a=Object(n.useState)(""),r=Object(i.a)(a,2),c=r[0],l=r[1],s=function(e){e.preventDefault(),c&&(t(c),l(""))};return o.a.createElement("form",{onSubmit:s},o.a.createElement("input",{type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Enter an item and press Enter or Add button",value:c,onChange:function(e){return l(e.target.value)}}),o.a.createElement("div",{className:"py-2"},o.a.createElement("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:s}," Add todo ")))},f=a(10),b=a.n(f),g=b.a.initializeApp({apiKey:"AIzaSyASzQbwCMeKVB1ivtLrLUC2lC4LVzy5BkM",authDomain:"my-todo-app-a4bf2.firebaseapp.com",databaseURL:"https://my-todo-app-a4bf2.firebaseio.com",projectId:"my-todo-app-a4bf2",storageBucket:"my-todo-app-a4bf2.appspot.com",messagingSenderId:"696490217141",appId:"1:696490217141:web:5d87b9dc452a316f6eb8fc",measurementId:"G-BJPMK0652R"}).firestore(),h=b.a.auth(),v=new b.a.auth.GoogleAuthProvider,E=g,y=(a(48),a(22)),x="SET_USER",w=function(e,t){switch(console.log(t),t.type){case x:return Object(y.a)(Object(y.a)({},e),{},{user:t.user});default:return e}},O=Object(n.createContext)(),S=function(e){var t=e.reducer,a=e.initialState,r=e.children;return o.a.createElement(O.Provider,{value:Object(n.useReducer)(t,a)},r)},N=function(){return Object(n.useContext)(O)};var j=function(){var e=N(),t=Object(i.a)(e,2),a=(t[0],t[1]),n=Object(u.g)();return o.a.createElement("div",{className:"login"},o.a.createElement("div",{className:"login__title text-2xl"},"Hey, welcome to todo list !"),o.a.createElement("div",{className:"login__logo"},o.a.createElement("img",{src:"https://image.freepik.com/free-vector/vector-illustration-cosmonaut_1441-11.jpg"})),o.a.createElement("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",type:"submit",onClick:function(e){e.preventDefault(),h.setPersistence(b.a.auth.Auth.Persistence.LOCAL).then((function(){return h.signInWithPopup(v)})).then((function(e){localStorage.setItem("user",JSON.stringify(e.user)),a({type:x,user:e.user})})).then((function(){n.push("/taskList")})).catch((function(e){return alert(e.message)}))}},"Sign in"),o.a.createElement("p",null," By signing you accept that this is a test version and some of your data might be visible to the developer"))};var k=function(){var e=JSON.parse(localStorage.getItem("user")),t=Object(u.g)();return Object(n.useEffect)((function(){console.log(e)}),[]),o.a.createElement("div",{className:"flex flex-wrap bg-gray-200"},o.a.createElement("div",null,e.displayName),o.a.createElement("div",null,o.a.createElement("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded absolute top-0 right-0",onClick:function(e){e.preventDefault(),h.signOut().then((function(){console.log("Cleaning local storage"),t.push("/login"),localStorage.clear()}))}},"Logout")))};var T=function(){var e=JSON.parse(localStorage.getItem("user")),t=Object(n.useState)([]),a=Object(i.a)(t,2),r=a[0],c=a[1];Object(n.useEffect)((function(){E.collection("users").doc(e.email).collection("TestTodoList").orderBy("timestamp","desc").onSnapshot((function(e){return c(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]);var l=function(t){E.collection("users").doc(e.email).collection("TestTodoList").doc(t.id).update({done:!t.data.done})},s=function(t){E.collection("users").doc(e.email).collection("TestTodoList").doc(t).delete()};return o.a.createElement(o.a.Fragment,null,o.a.createElement(d,null),o.a.createElement(k,null),o.a.createElement(p,{addTodo:function(t){E.collection("users").doc(e.email).collection("TestTodoList").add({timestamp:b.a.firestore.FieldValue.serverTimestamp(),done:!1,todo:t})}}),r.map((function(e){return o.a.createElement(m,{key:e.id,todo:e,completeTodo:l,removeTodo:s})})))};var C=function(){var e=N(),t=Object(i.a)(e,2);Object(l.a)(t[0]),t[1];var a=JSON.parse(localStorage.getItem("user"));return o.a.createElement(s.a,null,o.a.createElement("div",{className:"app container mx-auto px-4"},o.a.createElement(u.d,null,o.a.createElement(u.b,{exact:!0,path:"/",render:function(){return null===a?o.a.createElement(u.a,{to:"/login"}):o.a.createElement(u.a,{to:"/taskList"})}}),o.a.createElement(u.b,{exact:!0,path:"/my-app",render:function(){return o.a.createElement(u.a,{to:"/login"})}}),o.a.createElement(u.b,{exact:!0,path:"/login"},o.a.createElement(j,null)),o.a.createElement(u.b,{exact:!0,path:"/taskList"},o.a.createElement(T,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(S,{initialState:{user:null},reducer:w},o.a.createElement(C,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.fd0b76a1.chunk.js.map